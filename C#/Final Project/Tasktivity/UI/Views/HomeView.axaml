<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             x:Class="UI.Views.HomeView"
             xmlns:models="using:Data.Models"
             xmlns:local="using:UI.Views"
             xmlns:service="using:Services.Models"
             x:DataType="local:HomeView"
             Background="{DynamicResource ThemeSubBackground}">
    <UserControl.Styles>
		<Style Selector="Button:pointerover /template/ ContentPresenter">
			<Setter Property="Background" Value="{DynamicResource ThemeSubSubForeground}"/>
			<Setter Property="Foreground" Value="{DynamicResource ThemeBackground}"/>
        </Style>
        <Style Selector="TextBlock.DeadlinesForeground">
			<Setter Property="Foreground" Value="{DynamicResource ThemeForeground}"/>
        </Style>
        <Style Selector="ListBoxItem:selected /template/ ContentPresenter#PART_ContentPresenter">
			<Setter Property="Background" Value="Transparent"/>
        </Style>
        <Style Selector="CheckBox">
            <Style Selector="^:unchecked /template/ Border#NormalRectangle">
                <Setter Property="BorderBrush" Value="{DynamicResource ThemeBackground}"/>
                <Setter Property="BorderThickness" Value="2"/>    
                <Setter Property="Background" Value="{DynamicResource ThemeBackground}"/>
            </Style>
            <Style Selector="^:checked">
                <Style Selector="^ /template/ Border#NormalRectangle">
                    <Setter Property="Background" Value="Transparent"/>	
                    <Setter Property="BorderBrush" Value="{DynamicResource ThemeForeground}"/>
                    <Setter Property="BorderThickness" Value="0"/>    
                </Style>
                <Style Selector="^ /template/ Path#CheckGlyph">
                    <Setter Property="Height" Value="20"/>
                    <Setter Property="Width" Value="20"/>
                </Style>
            </Style>
        </Style>
    </UserControl.Styles>
    <Border Background="{DynamicResource ThemeBackground}" CornerRadius="12" Name="MainBorder">
        <Grid RowDefinitions="80,*">
		    <Grid Grid.Row="0" ColumnDefinitions="2*,*">
			    <Border Grid.Column="0" VerticalAlignment="Stretch">
				    <TextBlock Name="WelcomeTextBlock" Text="Welcome back!" FontSize="32" FontWeight="DemiBold" VerticalAlignment="Bottom" Margin="24,10,10,10" Foreground="{DynamicResource ThemeForeground}"/>
                </Border>
                <Grid Grid.Column="1" RowDefinitions="*,auto">
                    <StackPanel Grid.Row="1" Margin="8,8,8,20">
                        <Grid ColumnDefinitions="auto,*,auto">
					        <TextBlock Grid.Column="0" VerticalAlignment="Bottom" Name="TextBlockLvl" FontWeight="DemiBold" Foreground="{DynamicResource ThemeForeground}"/>
                            <TextBlock Grid.Column="2" VerticalAlignment="Bottom" Name="TextBlockExp" FontWeight="DemiBold" Foreground="{DynamicResource ThemeForeground}"/>
                        </Grid>
                        <ProgressBar Name="ProgressBarExp" Foreground="{DynamicResource ThemeAccent}" Value="60" Height="10"
                                     BorderBrush="{DynamicResource ThemeForeground}" BorderThickness="2"/>
                    </StackPanel> 
                </Grid>
            </Grid>
            <Grid Grid.Row="1" ColumnDefinitions="2*,3*">
			    <Border Grid.Column="0" Margin="24" CornerRadius="12" Background="{DynamicResource ThemeBackground}" BorderBrush="{DynamicResource ThemeSubBackground}" BorderThickness="3">
					<StackPanel HorizontalAlignment="Stretch">
						<TextBlock Text="Statistics" FontSize="28" FontWeight="DemiBold" HorizontalAlignment="Center" 
                            Foreground="{DynamicResource ThemeForeground}" Margin="8"/>

                        <TextBlock Text="Last week:" FontSize="22" FontWeight="DemiBold" 
                            Foreground="{DynamicResource ThemeForeground}" Margin="8,8,8,0"/>
                        <TextBlock Name="TextBlockStatsTasksWeek" Text=" - Tasks completed: 0" FontSize="16" FontWeight="DemiBold" 
                            Foreground="{DynamicResource ThemeForeground}" Margin="8,4,8,0"/>
                        <TextBlock Name="TextBlockStatsExpWeek" Text=" - Experience got: 0" FontSize="16" FontWeight="DemiBold" 
                            Foreground="{DynamicResource ThemeForeground}" Margin="8,4,8,0"/>

                        <TextBlock Text="All time:" FontSize="22" FontWeight="DemiBold" 
                            Foreground="{DynamicResource ThemeForeground}" Margin="8,24,8,0"/>
                        <TextBlock Name="TextBlockStatsTasksTotal" Text=" - Tasks completed: 0" FontSize="16" FontWeight="DemiBold" 
                            Foreground="{DynamicResource ThemeForeground}" Margin="8,4,8,0"/>
                        <TextBlock Name="TextBlockStatsExpTotal" Text=" - Experience got: 0" FontSize="16" FontWeight="DemiBold" 
                            Foreground="{DynamicResource ThemeForeground}" Margin="8,4,8,0"/>
                    </StackPanel>
                </Border>
                <Border Grid.Column="1" Margin="0,24,24,24" CornerRadius="12" Background="{DynamicResource ThemeBackground}" BorderBrush="{DynamicResource ThemeSubBackground}" BorderThickness="3">
					<Grid>
						<StackPanel HorizontalAlignment="Stretch">
                            <TextBlock Text="Deadlines soon" FontSize="28" FontWeight="DemiBold" HorizontalAlignment="Center" 
                                Foreground="{DynamicResource ThemeForeground}" Margin="8"/>
                            <ListBox Name="ListBoxDeadlinesSoon" Background="{DynamicResource ThemeBackground}">
								<ListBox.ItemTemplate>
									<DataTemplate DataType="{x:Type service:TaskPriority}">
                                        <Border Height="60" CornerRadius="12" BorderBrush="{Binding CategoryColor}" BorderThickness="2" Margin="-8">
											<Grid ColumnDefinitions="42,*">
												<Border Grid.Column="0" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Background="{Binding CategoryColor}" CornerRadius="8,0,0,8">
													<CheckBox IsChecked="{Binding IsCompleted}" Margin="8,0,0,0" VerticalAlignment="Center" HorizontalAlignment="Center" Click="CheckBoxComplete_IsCheckedChanged"/>
                                                </Border>
                                                <Grid Grid.Column="1">
													<TextBlock Text="{Binding Name}" Margin="5" FontSize="20" Classes="DeadlinesForeground" FontWeight="DemiBold"/>
                                                    <StackPanel Orientation="Horizontal" Margin="5" VerticalAlignment="Bottom">
														<TextBlock Text="{Binding Size.Name}" Width="200" Classes="DeadlinesForeground" FontWeight="DemiBold"/>
                                                        <TextBlock Text="{Binding TimeLeft}" Classes="DeadlinesForeground" FontWeight="DemiBold"/>
                                                    </StackPanel>
                                                </Grid>
                                            </Grid>
                                        </Border>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                            </ListBox>
                        </StackPanel>
                        <Button Width="72" Height="72" Margin="8" CornerRadius="36" Background="{DynamicResource ThemeAccent}" Foreground="{DynamicResource ThemeBackground}"
                                VerticalAlignment="Bottom" HorizontalAlignment="Right" Click="ButtonNewTask_Click">
							<Label Content="+" FontSize="42" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                        </Button>
                    </Grid>
                </Border>
                <Popup Grid.RowSpan="2" Name="EditPopup" Height="520" Width="640" PlacementTarget="{Binding #MainBorder}" Placement="Center" Closed="EditPopup_Closed"/>
            </Grid>
        </Grid>
    </Border>
</UserControl>
